# iOS Trading Backtesting App

## 项目简介
这个项目旨在开发一个 iOS 应用，帮助用户回测他们的交易想法。用户可以输入交易策略，应用将模拟这些策略在历史数据上的表现，帮助用户评估策略的有效性。

## 功能描述
- **策略输入**: 用户可以输入他们的交易策略，包括买入和卖出的条件。
- **数据导入**: 应用支持导入历史市场数据，供策略回测使用。
- **回测结果**: 应用将展示策略在历史数据上的表现，包括收益率、最大回撤等指标。
- **可视化**: 提供图表和图形界面，帮助用户直观地理解回测结果。

## 使用方法
1. 打开应用并登录。
2. 导入历史市场数据。
3. 输入交易策略。
4. 运行回测并查看结果。

## 参数说明
- **交易策略**: 包括买入条件、卖出条件、持仓时间等。
- **历史数据**: 包括时间、价格、成交量等。

## 返回值描述
- **收益率**: 策略在回测期间的总收益率。
- **最大回撤**: 策略在回测期间的最大资金回撤。
- **交易次数**: 策略在回测期间的总交易次数。

## 修改记录

### 2024-03-21
1. **初始项目结构搭建**
   - 创建了基本的 iOS 交易回测应用框架
   - 实现了主要数据模型：`Stock` 和 `DailyStockData`
   - 添加了数据管理器 `DataManager` 用于处理股票数据

2. **数据模型实现**
   - 在 `StockData.swift` 中实现了：
     - `Stock` 结构体：包含股票基本信息
     - `DailyStockData` 结构体：包含股票日线数据
     - `StockListResponse` 结构体：用于解析股票列表响应

3. **数据管理功能**
   - 在 `DataManager.swift` 中实现了：
     - 股票列表加载功能
     - 单个股票日线数据加载功能
     - 数据状态管理和发布

4. **用户界面开发**
   - 在 `ContentView.swift` 中实现了：
     - 主界面布局设计
     - 股票选择功能
     - 初始资金设置
     - 股票数据图表展示
     - 交易统计信息显示

5. **功能优化**
   - 优化了 `Stock` 结构体的 `Equatable` 协议实现
   - 更新了 `onChange` 监听器的实现方式，提高了类型安全性
   - 添加了股票搜索功能
   - 实现了股票选择器的弹出式界面

6. **数据同步**
   - 添加了 `copy_data.sh` 脚本用于数据文件同步
   - 实现了数据文件的自动复制和目录结构维护

## 待办事项
- [ ] 添加更多交易策略参数设置
- [ ] 实现回测结果分析功能
- [ ] 添加更多技术指标展示
- [ ] 优化数据加载性能
- [ ] 添加回测报告导出功能 